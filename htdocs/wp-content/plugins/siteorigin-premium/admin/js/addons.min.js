jQuery((function(n){n(".so-addon-banner").each((function(){var i=n(this);if(!i.find("img").length){var e=Trianglify({width:128,height:128,variance:1,cell_size:32,seed:i.data("seed")});i.append(e.svg())}})),n(".so-addon").each((function(){var e=n(this),a=e.data("id"),o=e.data("section");e.find(".so-addon-toggle-active button").on("click",(function(s){var t=n(this),d=parseInt(t.data("status"));t.prop("disabled",!0),n.post(n("#addons-list").data("action-url"),{id:a,section:o,status:d,activate_required:1},(function(o){if(t.prop("disabled",!1),d?(e.removeClass("so-addon-is-inactive").addClass("so-addon-is-active"),e.find(".so-addon-settings").show()):(e.removeClass("so-addon-is-active").addClass("so-addon-is-inactive"),e.find(".so-addon-settings").hide()),n("body").trigger("siteorigin_addon_status_changed",{id:a,status:d}),void 0!==o.action_links&&o.action_links.length){var s=e.find(".so-addon-links").empty();s.length||(s=n('<div class="so-addon-links"></div>').insertAfter(e.find(".so-addon-name"))),s.html(o.action_links.join(" | "))}if(void 0!==o.submenu_links&&o.submenu_links.length)for(i=0;i<o.submenu_links.length;++i)"enabled"==o.status?n(".toplevel_page_"+o.submenu_links[i].section+" .wp-submenu").append('<li><a href="'+o.submenu_links[i].link+'">'+o.submenu_links[i].label+"</li>"):n(".toplevel_page_"+o.submenu_links[i].section+' .wp-submenu li:contains("'+o.submenu_links[i].label+'")').remove();n(window).trigger("resize")}))}))})),n(".so-addon .so-addon-tags a").on("click",(function(i){i.preventDefault();var e=n(this);n(".addons-search").val(e.data("tag")),a(),setTimeout((function(){n(window).trigger("resize"),n(window).scrollTop(0)}),200)}));var e="";n(".page-sections a").on("click",(function(i){i.preventDefault(),n(".page-sections li").removeClass("active-section");var o=n(this);e=o.data("section"),o.parent("li").addClass("active-section"),a()}));var a=function(){var i=e,a=n(".addons-search").val();""===a?""===i?n(".so-addon-wrap").show():(n(".so-addon-wrap").hide(),n('.so-addon[data-section="'+e+'"]').parents().show()):n(".so-addon").each((function(){var e=n(this),o=e.find("h3").html()+" "+e.find(".so-addon-description").html();e.find(".so-addon-tags a").each((function(){o+=n(this).data("tag")+" "})),o.toLowerCase().indexOf(a)>-1&&(""===i||e.data("section")===i)?e.parent().show():e.parent().hide()})),n(window).trigger("resize")};a(),n(".addons-search").on({keyup:a,change:a,search:a}),n(window).on("resize",(function(){var i=n(".so-addon:visible").css("height","auto"),e=[],a=0;i.each((function(i){a=(a=i/3)<0?Math.ceil(a):Math.floor(a),n(this).data("column",a),e[a]=Math.max(void 0===e[a]?0:e[a],n(this).height())})),i.each((function(){n(this).css("height",e[n(this).data("column")]+"px")}))})).trigger("resize");var o=n("#siteorigin-premium-settings-dialog"),s=n("#addons-list .so-addon-settings");s.on("click",(function(i){var e=n(this);i.preventDefault();var a=o.find(".so-content");a.empty().addClass("so-loading"),n.get(e.data("form-url")).done((function(i){a.html(i),n("body").trigger("siteorigin_addon_settings_loaded",e)})).fail((function(i){a.html(soPremiumAddons.settingsForm.error),console.error(i)})).always((function(){a.removeClass("so-loading")})),o.show()})),o.find(".so-close").on("click",(function(i){i.preventDefault(),o.hide()})),o.find(".so-save").on("click",(function(i){if(i.preventDefault(),"function"==typeof sowbForms.validateFields){var e=sowbForms.validateFields(o);if("boolean"==typeof e&&!e)return!1}var a=n(this);a.prop("disabled",!0),s.prop("disabled",!0),o.find("form").on("submit",(function(){a.prop("disabled",!1),o.hide()})).trigger("submit")})),n("#so-premium-addon-settings-save").on("load",(function(){n("#addons-list .so-addon-settings").prop("disabled",!1)}));var t=n(".modal-video");t.find(".modal-video-close-btn").addBack().on("click",(function(){var i=t.find("iframe.active").removeClass("active");i.length&&i.data("player").pause();t.hide()})),jQuery(document).on("keyup",(function(i){"Escape"===i.key&&(t.is(":visible")&&t.find(".modal-video-close-btn").trigger("click"),o.is(":visible")&&o.hide())})),n(".js-modal-video").each((function(){var i,e=n(this),a=e.data("video-id"),o="https://player.vimeo.com/video/"+a+"?autoplay=0";0===(i=n("iframe#video_"+a)).length&&(i=n("<iframe >").attr({id:"video_"+a,src:o,allow:"autoplay",allowfullscreen:"1"}).appendTo(t.find(".modal-video-movie-wrap")));var s=new Vimeo.Player(i);i.data("player",s),s.on("play",(function(){i.is(":visible")||s.pause()})),e.on("click",(function(){t.find("iframe").hide(),i.show().addClass("active"),t.show(),s.play()}))})),t.show().hide(),n(".installer-link").on("click",(function(i){i.preventDefault(),n(".installer-container").slideToggle("fast")})),n(".installer_status").on("change",(function(){var i=n(this);i.prop("disabled",!0),jQuery.post(ajaxurl,{action:"so_installer_status",nonce:i.data("nonce"),status:i.is(":checked")},(function(){i.prop("disabled",!1)}))}))}));