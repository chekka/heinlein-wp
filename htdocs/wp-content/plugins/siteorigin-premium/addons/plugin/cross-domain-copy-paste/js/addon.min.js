jQuery((function(o){window.SiteOriginPremium=window.SiteOriginPremium||{},o("body").on("siteorigin_addon_status_changed",(function(e,i){"plugin/cross-domain-copy-paste"==i.id&&1==i.status&&"http:"==window.location.protocol&&(alert(soPremiumCrossDomainCopyPaste.https),o('.so-addon[data-id="plugin/cross-domain-copy-paste"] .so-addon-deactivate').trigger("click"))}));var e=!1;SiteOriginPremium.CrossDomainCopyPasteAddon=function(){return{setupBrowserStorage:function(s,t){if("boolean"!=typeof SiteOriginPremium.CrossDomainCopyPasteAddon.allowed){0==o(".siteorigin-premium-cross-domain-copy-paste").length&&o(".siteorigin-premium-cross-domain-copy-paste-container").append('<iframe src="'+o(".siteorigin-premium-cross-domain-copy-paste-container").data("src")+'" class="siteorigin-premium-cross-domain-copy-paste" />');var a=setInterval((function(){"boolean"==typeof SiteOriginPremium.CrossDomainCopyPasteAddon.allowed&&(clearInterval(a),e&&(i(),e=!1),s())}),200)}else s()},action:function(e){"clipboard"==soPremiumCrossDomainCopyPaste.method&&navigator.clipboard.writeText(JSON.stringify(e.data)),"storage"!=soPremiumCrossDomainCopyPaste.method&&"siteorigin_page_siteorigin-premium-addons"!=pagenow||void 0===localStorage.so_premium_cross_domain_allowed||new Promise(this.setupBrowserStorage).then(()=>{o(".siteorigin-premium-cross-domain-copy-paste")[0].contentWindow.postMessage(JSON.stringify(e),"*")})},copy:function(o){this.action({method:"set",data:o})},paste:function(){pasteData=this.action({method:"get"})}}},window.onmessage=function(s){if("https://clipboard.siteorigin.com"==s.origin){var t=JSON.parse(s.data);"object"==typeof t&&null!=t&&("boolean"==typeof t.close&&void 0===t.automatic&&(i(),e=!0),"number"==typeof t.resize&&o(".siteorigin-premium-cross-domain-copy-paste").height(Number(t.resize)+25+"px"),"boolean"==typeof t.allowed&&(t.allowed?(SiteOriginPremium.CrossDomainCopyPasteAddon.allowed=!0,localStorage.so_premium_cross_domain_allowed=!0,o(".so-premium-copy-paste-prompt").hide()):t.denied&&(localStorage.so_premium_cross_domain_allowed=!1,SiteOriginPremium.CrossDomainCopyPasteAddon.allowed=!1)),!SiteOriginPremium.CrossDomainCopyPasteAddon.allowed||void 0===t.class&&void 0===t.thingType||localStorage.setItem("panels_clipboard_"+userSettings.uid,s.data))}};var i=function(){o(".siteorigin-premium-cross-domain-copy-paste-container").hide(),o(".so-premium-copy-paste-prompt").removeClass("disabled")},s=SiteOriginPremium.CrossDomainCopyPasteAddon();o(document).on("click",".so-premium-copy-paste-prompt",(function(){o(this).addClass("disabled"),o(".siteorigin-premium-cross-domain-copy-paste-container").show(),o(".so-premium-copy-paste-prompt").addClass("disabled"),o(window).one("keyup",(function(e){27===e.which&&o(".siteorigin-premium-cross-domain-copy-paste").is(":visible")&&i()})),"boolean"!=typeof SiteOriginPremium.CrossDomainCopyPasteAddon.allowed&&new Promise(s.setupBrowserStorage)})),"storage"==soPremiumCrossDomainCopyPaste.method&&void 0!==localStorage.so_premium_cross_domain_allowed&&!0===JSON.parse(localStorage.so_premium_cross_domain_allowed)&&(o(".so-premium-copy-paste-prompt").hide(),new Promise(s.setupBrowserStorage).then(()=>{setInterval((function(){SiteOriginPremium.CrossDomainCopyPasteAddon().paste()}),1500)})),"clipboard"==soPremiumCrossDomainCopyPaste.method&&o(document).on("paste",".siteorigin-widget-field-copy_paste_data textarea",(function(){const e=o(this).parents(".siteorigin-widget-field-copy_paste_data");setTimeout((function(){const o=e.find("textarea").val();let i=soPremiumCrossDomainCopyPaste.fail;if(""!=o)try{const e=JSON.parse(o);if(void 0===e.class&&void 0===e.thingType)return!1;localStorage.setItem("panels_clipboard_"+userSettings.uid,o),i=soPremiumCrossDomainCopyPaste.success}catch(o){console.log(o),i=soPremiumCrossDomainCopyPaste.fail}e.find(".siteorigin-widget-field-label").text(i),e.find("textarea").val("")}),150)})),o("body").on("siteorigin_addon_settings_loaded",(function(e,i){"plugin/cross-domain-copy-paste"==o(i).parents(".so-addon").data("id")&&void 0!==localStorage.so_premium_cross_domain_allowed&&o(".so-premium-copy-paste-prompt").hide()})),"clipboard"==soPremiumCrossDomainCopyPaste.method&&pagenow.length>0&&"widgets"==pagenow&&o(document).on("click",".siteorigin-panels-display-builder",(function(){const e=o(".so-panels-dialog-wrapper:last-of-type");0==e.find(".siteorigin-premium-copy-page-widgets-fields").length&&e.find(".so-content.panel-dialog").append(o(".siteorigin-premium-copy-page-widgets").html())}))}));